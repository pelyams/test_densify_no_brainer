это тестовое задание

Есть множество (массив, где порядок не важен) целых чисел в диапазоне от 1 до 300.
Количество чисел - до 1000. Напишите функцию сериализации / десериализации в строку, чтобы итоговая строка была компактной.
Цель задачи - максимально сжать данные относительно простой сериализации без алгоритма сжатия (хотя бы 50% в среднем).
Сериализованная строка должна содержать только ASCII символы. Можно использовать любой язык программирования.
Вместе с решением нужно прислать набор тестов - исходная строка, сжатая строка, коэффициент сжатия.
Примеры тестов: простейшие короткие, случайные - 50 чисел, 100 чисел, 500 чисел, 1000 чисел, граничные - все числа 1 знака, все числа из 2х знаков, все числа из 3х знаков, каждого числа по 3 - всего чисел 900.


в решении я руководился тем, что числа довольно малые, и большинство из них могло бы быть представлено одним байтом (круто), а наиболее крупные - 9 битами (чуть менее круто). поскольку запятые или другие разделители кодировать не хочется, каждому числу будет соответствовать байт или 2 байта. подход следующий: используем старший бит для индикации того, сколько байт занимает число (1 - два байта, 0 - 1 байт). соответственно, в 1 байт у нас помещаются числа до 128, а если число больше - то используем 2 байта. при этом у нас остается еще несколько битов, не отягощенных логикой, которые можно использовать для более эффективного кодирования дублирующихся чисел.
в итоге получается строка из байтов, представляющих записи в формате: количество (опционально, если присутствуют дубликаты: 1 или 2 байта) + число (1 или 2 байта)


анатомия первого байта для количества/числа:\
xххххххх\
| | |\
| | |— 0 - количество дубликатов умещается в оставшиеся 5 бит, 1 - следующий байт тоже содержит данные о дубликатах\
| |\
| | — 0 - число >=128, 1 - количество дубликатов для последующей записи\
|\
|— 0 - число от 1 до 128, 1 - число >=128 или количество чисел для последующей записи


теперь осталось подравнять количество бит в итоговой строке, чтобы получилось кратно 6, и перевести двоичное представление в 64-ное. все, мы в среднем справились